name: dnsquery
title: DNS query collector
overview:
  application:
    description: "TBD\n"
  collector:
    description: "This module provides DNS query round-trip time (RTT).\n"
setup:
  prerequisites:
    list: []
  configuration:
    options:
      description: "The following options can be defined globally: update_every, autodetection_retry.\n"
      folding:
        title: All options
        enabled: true
      list:
        - name: update_every
          description: Data collection frequency.
          required: false
          default_value: 1
        - name: autodetection_retry
          description: Re-check interval in seconds. Zero means not to schedule re-check.
          required: false
          default_value: 0
        - name: domains
          description: Domain or subdomains to query. The collector will choose a
            random domain from the list on every iteration.
          required: true
          default_value: '-'
        - name: servers
          description: Servers to query.
          required: true
          default_value: '-'
        - name: port
          description: DNS server port.
          required: false
          default_value: 53
        - name: network
          description: 'Network protocol name. Vailable options: udp, tcp, tcp-tls.'
          required: false
          default_value: udp
        - name: record_types
          description: 'Query record type. Available options: A, AAAA, CNAME, MX,
            NS, PTR, TXT, SOA, SPF, TXT, SRV.'
          required: false
          default_value: A
        - name: timeout
          description: Query read timeout.
          required: false
          default_value: 2
    examples:
      list:
        - name: Basic
          description: An example configuration.
          folding:
            title: Example
            enabled: true
          config: "jobs:\n  - name: job1\n    record_types:\n      - A\n      - AAAA\n\
            \    domains:\n      - google.com\n      - github.com\n      - reddit.com\n\
            \    servers:\n      - 8.8.8.8\n      - 8.8.4.4\n"
      folding:
        title: Config options
        enabled: true
    file:
      name: ''
troubleshooting:
  problems:
    list: []
metrics:
  folding:
    title: Metrics
    enabled: false
  description: TBD
  availability: []
  scopes:
    - name: server
      description: TBD
      labels:
        - name: server
          description: TBD
        - name: network
          description: TBD
        - name: record_type
          description: TBD
      metrics:
        - name: dns_query.query_status
          description: DNS Query Status
          unit: status
          dimensions:
            - name: success
            - name: network_error
            - name: dns_error
          chart_type: line
        - name: dns_query.query_time
          description: DNS Query Time
          unit: seconds
          dimensions:
            - name: query_time
          chart_type: line
