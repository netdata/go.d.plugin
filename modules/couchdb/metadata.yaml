name: couchdb
title: Apache CouchDB collector
overview:
  application:
    description: "[Apache CouchDB](https://couchdb.apache.org/) is an open source
      NoSQL document database that collects and stores data in JSON-based document
      formats.\n"
  collector:
    description: "This collector monitors vital statistics of one or more Apache CouchDB
      2.x servers, depending on your configuration.\n"
setup:
  prerequisites:
    list: []
  configuration:
    options:
      description: "The following options can be defined globally: update_every, autodetection_retry.\n"
      folding:
        title: All options
        enabled: true
      list:
        - name: update_every
          description: Data collection frequency.
          required: false
          default_value: 1
        - name: autodetection_retry
          description: Re-check interval in seconds. Zero means not to schedule re-check.
          required: false
          default_value: 0
        - name: url
          description: Server URL.
          required: true
          default_value: '`http://127.0.0.1:5984`'
        - name: username
          description: Username for basic HTTP authentication.
          required: false
          default_value: '-'
        - name: password
          description: Password for basic HTTP authentication.
          required: false
          default_value: '-'
        - name: proxy_url
          description: The Proxie's URL.
          required: false
          default_value: '-'
        - name: proxy_username
          description: Username for proxy basic HTTP authentication.
          required: false
          default_value: '-'
        - name: proxy_password
          description: Password for proxy basic HTTP authentication.
          required: false
          default_value: '-'
        - name: node
          description: CouchDB node name. Same as -name vm.args argument.
          required: false
          default_value: _local
        - name: databases
          description: List of database names for which db-specific stats should be
            displayed, space separated.
          required: false
          default_value: '-'
        - name: timeout
          description: HTTP request timeout.
          required: false
          default_value: 5
        - name: method
          description: HTTP request method.
          required: false
          default_value: GET
        - name: body
          description: HTTP request body.
          required: false
          default_value: '-'
        - name: headers
          description: HTTP request headers.
          required: false
          default_value: '-'
        - name: not_follow_redirects
          description: Whether to not follow redirects from the server.
          required: false
          default_value: no
        - name: tls_skip_verify
          description: Whether to skip verifying server's certificate chain and hostname.
          required: false
          default_value: no
        - name: tls_ca
          description: Certificate authority that client use when verifying server
            certificates.
          required: false
          default_value: '-'
        - name: tls_cert
          description: Client tls certificate.
          required: false
          default_value: '-'
        - name: tls_key
          description: Client tls key.
          required: false
          default_value: '-'
    examples:
      list:
        - name: Basic
          description: An example configuration.
          folding:
            title: Example
            enabled: true
          config: "jobs:\n  - name: local\n    url: http://127.0.0.1:5984\n"
        - name: Basic HTTP auth
          description: Local server with basic HTTP authentication, node name and
            multiple databases defined. Make sure to match the node name with the
            `NODENAME` value in your CouchDB's `etc/vm.args` file. Typically, this
            is of the form `couchdb@fully.qualified.domain.name` in a cluster, or
            `couchdb@127.0.0.1` for a single-node server.
          folding:
            title: Example
            enabled: true
          config: "jobs:\n  - name: local\n    url: http://127.0.0.1:5984\n    node:
            couchdb@127.0.0.1\n    databases: my-db other-db\n    username: foo\n\
            \    password: bar\n"
        - name: Multi-instance
          description: When you are defining more than one jobs, you must be careful
            to use different job names, to not override each other.
          folding:
            title: Example
            enabled: true
          config: "jobs:\n  - name: local\n    http://127.0.0.1:5984\n  \n  - name:
            remote\n    http://192.0.2.0:5984\n"
      folding:
        title: Config options
        enabled: true
    file:
      name: ''
troubleshooting:
  problems:
    list: []
metrics:
  folding:
    title: Metrics
    enabled: false
  description: TBD
  availability: []
  scopes:
    - name: global
      description: TBD
      labels: []
      metrics:
        - name: couchdb.activity
          description: Overall Activity
          unit: requests/s
          dimensions:
            - name: db_reads
            - name: db_writes
            - name: view_reads
          chart_type: stacked
        - name: couchdb.request_methods
          description: HTTP request methods
          unit: requests/s
          dimensions:
            - name: copy
            - name: delete
            - name: get
            - name: head
            - name: options
            - name: post
            - name: put
          chart_type: stacked
        - name: couchdb.response_codes
          description: HTTP response status codes
          unit: responses/s
          dimensions:
            - name: '200'
            - name: '201'
            - name: '202'
            - name: '204'
            - name: '206'
            - name: '301'
            - name: '302'
            - name: '304'
            - name: '400'
            - name: '401'
            - name: '403'
            - name: '404'
            - name: '406'
            - name: '409'
            - name: '412'
            - name: '413'
            - name: '414'
            - name: '415'
            - name: '416'
            - name: '417'
            - name: '500'
            - name: '501'
            - name: '503'
          chart_type: stacked
        - name: couchdb.response_code_classes
          description: HTTP response status code classes
          unit: responses/s
          dimensions:
            - name: 2xx
            - name: 3xx
            - name: 4xx
            - name: 5xx
          chart_type: stacked
        - name: couchdb.active_tasks
          description: Active task breakdown
          unit: tasks
          dimensions:
            - name: indexer
            - name: db_compaction
            - name: replication
            - name: view_compaction
          chart_type: stacked
        - name: couchdb.replicator_jobs
          description: Replicator job breakdown
          unit: jobs
          dimensions:
            - name: running
            - name: pending
            - name: crashed
            - name: internal_replication_jobs
          chart_type: stacked
        - name: couchdb.open_files
          description: Open files
          unit: files
          dimensions:
            - name: files
          chart_type: line
        - name: couchdb.erlang_vm_memory
          description: Erlang VM memory usage
          unit: B
          dimensions:
            - name: atom
            - name: binaries
            - name: code
            - name: ets
            - name: procs
            - name: other
          chart_type: stacked
        - name: couchdb.proccounts
          description: Process counts
          unit: processes
          dimensions:
            - name: os_procs
            - name: erl_procs
          chart_type: line
        - name: couchdb.peakmsgqueue
          description: Peak message queue size
          unit: messages
          dimensions:
            - name: peak_size
          chart_type: line
        - name: couchdb.reductions
          description: Erlang reductions
          unit: reductions
          dimensions:
            - name: reductions
          chart_type: line
        - name: couchdb.db_sizes_file
          description: Database sizes (file)
          unit: KiB
          dimensions:
            - name: a dimension per database
          chart_type: line
        - name: couchdb.db_sizes_external
          description: Database sizes (external)
          unit: KiB
          dimensions:
            - name: a dimension per database
          chart_type: line
        - name: couchdb.db_sizes_active
          description: Database sizes (active)
          unit: KiB
          dimensions:
            - name: a dimension per database
          chart_type: line
        - name: couchdb.db_doc_count
          description: 'Database # of docs'
          unit: docs
          dimensions:
            - name: a dimension per database
          chart_type: line
        - name: couchdb.db_doc_del_count
          description: 'Database # of deleted docs'
          unit: docs
          dimensions:
            - name: a dimension per database
          chart_type: line
