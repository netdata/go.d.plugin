name: powerdns_recursor
title: PowerDNS Recursor collector
overview:
  application:
    description: "[PowerDNS Recursor](https://doc.powerdns.com/recursor/) is a high-performance
      DNS recursor with built-in scripting\ncapabilities.\n"
  collector:
    description: "This collector monitors one or more `PowerDNS Recursor` instances,
      depending on your configuration.\n\nIt collects metrics\nfrom [the internal
      webserver](https://doc.powerdns.com/recursor/http-api/index.html#built-in-webserver-and-http-api).\n
      \nUsed endpoints:\n\n- [`/api/v1/servers/localhost/statistics`](https://doc.powerdns.com/recursor/common/api/endpoint-statistics.html)\n"
setup:
  prerequisites:
    list:
      - title: Enable webserver
        description: "Follow [webserver](https://doc.powerdns.com/recursor/http-api/index.html#webserver)
          documentation.\n"
      - title: Enable HTTP API
        description: "Follow [HTTP API](https://doc.powerdns.com/recursor/http-api/index.html#enabling-the-api)
          documentation.\n"
  configuration:
    options:
      description: "The following options can be defined globally: update_every, autodetection_retry.\n"
      folding:
        title: Config options
        enabled: true
      list:
        - name: update_every
          description: Data collection frequency.
          required: false
          default_value: 5
        - name: autodetection_retry
          description: Re-check interval in seconds. Zero means not to schedule re-check.
          required: false
          default_value: 0
        - name: url
          description: Server URL.
          required: true
          default_value: http://127.0.0.1:8081
        - name: timeout
          description: HTTP request timeout.
          required: false
          default_value: 1
        - name: username
          description: Username for basic HTTP authentication.
          required: false
          default_value: ''
        - name: password
          description: Password for basic HTTP authentication.
          required: false
          default_value: ''
        - name: proxy_url
          description: Proxy URL.
          required: false
          default_value: ''
        - name: proxy_username
          description: Username for proxy basic HTTP authentication.
          required: false
          default_value: ''
        - name: proxy_password
          description: Password for proxy basic HTTP authentication.
          required: false
          default_value: ''
        - name: method
          description: HTTP request method.
          required: false
          default_value: GET
        - name: body
          description: HTTP request body.
          required: false
          default_value: ''
        - name: headers
          description: HTTP request headers.
          required: false
          default_value: ''
        - name: not_follow_redirects
          description: Redirect handling policy. Controls whether the client follows
            redirects.
          required: false
          default_value: no
        - name: tls_skip_verify
          description: Server certificate chain and hostname validation policy. Controls
            whether the client performs this check.
          required: false
          default_value: no
        - name: tls_ca
          description: Certification authority that the client uses when verifying
            the server's certificates.
          required: false
          default_value: ''
        - name: tls_cert
          description: Client TLS certificate.
          required: false
          default_value: ''
        - name: tls_key
          description: Client TLS key.
          required: false
          default_value: ''
    examples:
      folding:
        title: Config
        enabled: true
      list:
        - name: Basic
          description: An example configuration.
          config: "jobs:\n  - name: local\n    url: http://127.0.0.1:8081\n"
        - name: HTTP authentication
          description: Basic HTTP authentication.
          config: "jobs:\n  - name: local\n    url: http://127.0.0.1:8081\n    username:
            admin\n    password: password\n"
        - name: Multi-instance
          description: "> **Note**: When you define multiple jobs, their names must
            be unique.\n\nLocal and remote instances.\n"
          config: "jobs:\n  - name: local\n    url: http://127.0.0.1:8081\n\n  - name:
            remote\n    url: http://203.0.113.0:8081\n"
    file:
      name: ''
troubleshooting:
  problems:
    list: []
metrics:
  folding:
    title: Metrics
    enabled: false
  description: ''
  availability: []
  scopes:
    - name: global
      description: These metrics refer to the entire monitored application.
      labels: []
      metrics:
        - name: powerdns_recursor.questions_in
          description: Incoming questions
          unit: questions/s
          dimensions:
            - name: total
            - name: tcp
            - name: ipv6
          chart_type: line
        - name: powerdns_recursor.questions_out
          description: Outgoing questions
          unit: questions/s
          dimensions:
            - name: udp
            - name: tcp
            - name: ipv6
            - name: throttled
          chart_type: line
        - name: powerdns_recursor.answer_time
          description: Queries answered within a time range
          unit: queries/s
          dimensions:
            - name: 0-1ms
            - name: 1-10ms
            - name: 10-100ms
            - name: 100-1000ms
            - name: slow
          chart_type: line
        - name: powerdns_recursor.timeouts
          description: Timeouts on outgoing UDP queries
          unit: timeouts/s
          dimensions:
            - name: total
            - name: ipv4
            - name: ipv6
          chart_type: line
        - name: powerdns_recursor.drops
          description: Drops
          unit: drops/s
          dimensions:
            - name: over-capacity-drops
            - name: query-pipe-full-drops
            - name: too-old-drops
            - name: truncated-drops
            - name: empty-queries
          chart_type: line
        - name: powerdns_recursor.cache_usage
          description: Cache Usage
          unit: events/s
          dimensions:
            - name: cache-hits
            - name: cache-misses
            - name: packet-cache-hits
            - name: packet-cache-misses
          chart_type: line
        - name: powerdns_recursor.cache_size
          description: Cache Size
          unit: entries
          dimensions:
            - name: cache
            - name: packet-cache
            - name: negative-cache
          chart_type: line
