{
  "jsonSchema": {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Postgres collector configuration.",
    "type": "object",
    "properties": {
      "update_every": {
        "title": "Update frequency",
        "description": "The frequency, in seconds, at which data is collected from the Postgres server.",
        "type": "integer",
        "minimum": 1,
        "default": 1
      },
      "dsn": {
        "title": "DSN",
        "description": "Postgres server Data Source Name (DSN) specifying the connection details, including authentication credentials.",
        "type": "string",
        "default": "postgres://netdata:password@127.0.0.1:5432/postgres"
      },
      "timeout": {
        "title": "Timeout",
        "description": "The timeout, in seconds, for queries executed against the Postgres server.",
        "type": "number",
        "minimum": 0.5,
        "default": 2
      },
      "collect_databases_matching": {
        "title": "Database selector",
        "description": "Configuration for monitoring specific databases using Netdata simple patterns. For example, 'mydb*' will match databases starting with 'mydb'.",
        "type": "string"
      },
      "max_db_tables": {
        "title": "Database tables limit",
        "description": "Table metrics will not be collected for databases that have more tables than the limit. Set to 0 for no limit.",
        "type": "integer",
        "minimum": 0,
        "default": 50
      },
      "max_db_indexes": {
        "title": "Database index limit",
        "description": "Index metrics will not be collected for databases that have more indexes than the limit. Set to 0 for no limit.",
        "type": "integer",
        "minimum": 0,
        "default": 250
      },
      "transaction_time_histogram": {
        "title": "Transaction time histogram",
        "description": "Buckets for transaction time histogram in milliseconds.",
        "type": "array",
        "items": {
          "title": "Bucket",
          "type": "number",
          "exclusiveMinimum": 0
        },
        "uniqueItems": true,
        "default": [
          0.1,
          0.5,
          1,
          2.5,
          5,
          10
        ]
      },
      "query_time_histogram": {
        "title": "Query time histogram",
        "description": "Buckets for query time histogram in milliseconds.",
        "type": "array",
        "items": {
          "title": "Bucket",
          "type": "number",
          "exclusiveMinimum": 0
        },
        "uniqueItems": true,
        "default": [
          0.1,
          0.5,
          1,
          2.5,
          5,
          10
        ]
      }
    },
    "required": [
      "dsn"
    ]
  },
  "uiSchema": {
    "uiOptions": {
      "fullPage": true
    },
    "ui:flavour": "tabs",
    "ui:options": {
      "tabs": [
        {
          "title": "Base",
          "fields": [
            "update_every",
            "dsn",
            "timeout"
          ]
        },
        {
          "title": "Database stats",
          "fields": [
            "max_db_tables",
            "max_db_indexes",
            "collect_databases_matching"
          ]
        },
        {
          "title": "Histograms",
          "fields": [
            "transaction_time_histogram",
            "query_time_histogram"
          ]
        }
      ]
    },
    "transaction_time_histogram": {
      "ui:listFlavour": "list"
    },
    "query_time_histogram": {
      "ui:listFlavour": "list"
    }
  }
}
